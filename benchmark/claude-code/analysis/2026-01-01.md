# Benchmark Analysis: 2026-01-01

## Executive Summary

Analysis of 50-run benchmark comparing Gabb-enhanced Claude Code vs Control on the `astropy__astropy-14995` task.

**Key Findings:**
- Gabb reduces task completion time by **50%** (60.2s → 29.9s)
- Time savings are statistically significant (t ≈ 8.7, p << 0.001)
- gabb_structure is used in **48% of runs overall**, but **73% of runs that read files**
- The time savings come from **behavioral change** (fewer tool calls, fewer file reads), not specifically from gabb_structure
- Token costs increase by 24%, but dollar cost remains unchanged due to caching
- SKILL.md has ~490 tokens of redundancy that could be trimmed

---

## 1. Aggregate Results

### Primary Metrics

| Metric | Control | Gabb | Difference |
|--------|---------|------|------------|
| Success Rate | 100% | 100% | - |
| Time (s) | 60.2 ± 16.4 | 29.9 ± 19.0 | -30.4 (-50%) |
| Total Tokens | 60,435 ± 10,409 | 74,867 ± 18,745 | +14,433 (+24%) |
| Tool Calls | 19.5 ± 6.9 | 7.2 ± 7.6 | -12.4 |
| Turns | 2.7 ± 0.4 | 4.1 ± 1.2 | +1.3 |
| Cost (USD) | $0.03 ± $0.01 | $0.03 ± $0.01 | +$0.00 (0%) |

### Cache Token Breakdown

| Token Type | Control | Gabb | Difference |
|------------|---------|------|------------|
| Cache Read (10% cost) | 57,919 ± 10,099 | 73,497 ± 18,728 | +15,578 (+27%) |
| Cache Create (125% cost) | 1,965 ± 1,748 | 868 ± 1,483 | -1,097 (-56%) |
| Input (100% cost) | 5 ± 0 | 16 ± 20 | +11 (+232%) |
| Output (5x cost) | 546 ± 139 | 486 ± 143 | -59 (-11%) |

### Tool Usage Comparison

| Tool | Control | Gabb |
|------|---------|------|
| Glob | 1.3 ± 0.8 | 0.2 ± 0.4 |
| Grep | 5.0 ± 1.8 | 2.9 ± 1.1 |
| Read | 5.3 ± 1.9 | 1.5 ± 2.3 |
| mcp__gabb__gabb_structure | 0.0 ± 0.0 | 0.5 ± 0.6 |
| Bash | 7.0 ± 5.3 | 1.8 ± 4.2 |
| Task | 1.0 ± 0.0 | 0.3 ± 0.4 |

---

## 2. Statistical Significance

### Time Reduction

```
Control mean: 60.2s, std: 16.4s, n=50
Gabb mean: 29.9s, std: 19.0s, n=50

Standard Error of Control: 16.4 / √50 = 2.32s
Standard Error of Gabb: 19.0 / √50 = 2.69s
Standard Error of Difference: √(2.32² + 2.69²) = 3.55s

t-statistic: 30.4 / 3.55 = 8.56
Degrees of freedom: ~98 (approximation)

Result: p << 0.001 (highly significant)
95% CI for time reduction: [23.5s, 37.3s]
```

### Token Increase

```
Control mean: 60,435 tokens, std: 10,409, n=50
Gabb mean: 74,867 tokens, std: 18,745, n=50

Standard Error of Difference: √((10,409/√50)² + (18,745/√50)²) = 3,032

t-statistic: 14,433 / 3,032 = 4.76

Result: p << 0.001 (highly significant)
95% CI for token increase: [8,490, 20,376]
```

### Conclusion on Sample Size

**50 runs is sufficient** to detect the main effects:
- Time reduction of 50% is robust (t ≈ 8.7)
- Token increase of 24% is robust (t ≈ 4.8)

**50 runs is borderline** for subgroup analysis (gabb_structure users vs non-users within Gabb condition). Would need ~100+ runs for medium effect sizes.

---

## 3. gabb_structure Usage Analysis

### Overall Usage Rate

| Metric | Value |
|--------|-------|
| Runs with gabb_structure > 0 | 24/50 (48%) |
| Runs with gabb_structure = 0 | 26/50 (52%) |
| Average calls when used | 1.2 |

### Usage by Read Count

| Read Count | Runs | gabb_structure Usage |
|------------|------|---------------------|
| 0 reads | 17 | 0/17 (0%) |
| 1 read | 23 | 18/23 (78%) |
| 2+ reads | 10 | 6/10 (60%) |

**Key insight:** gabb_structure is used in **73% of runs that read files** (24/33), but never in runs that don't read files. This is expected behavior - the tool is a pre-read check.

---

## 4. Behavioral Pattern Analysis

### Three Distinct Patterns in Gabb Runs

| Pattern | Runs | Avg Time | Avg Tokens | Description |
|---------|------|----------|------------|-------------|
| 0 reads, 0 structure | 17 (34%) | 17.3s ± 2.3 | 69,035 | Solved from prompt alone |
| 1 read, 1 structure | 18 (36%) | 22.5s ± 2.1 | ~91,000 | Standard gabb_structure→Read flow |
| 2+ reads | 15 (30%) | 52.6s ± 18.5 | ~60,000 | Complex exploration |

### Control vs Gabb Read Distribution

| Metric | Control | Gabb |
|--------|---------|------|
| Runs with 0 reads | 0/50 (0%) | 17/50 (34%) |
| Average reads | 5.3 | 1.5 |
| Read range | 2-11 | 0-10 |

**Critical finding:** Control runs ALWAYS read files (min 2 reads). Gabb runs often solve without reading (34%) or with just 1 read (46%).

---

## 5. Selection Bias Analysis

### Does gabb_structure Specifically Help?

Comparing runs that DO read files (Read > 0):

| Metric | WITH gabb_structure (n=24) | WITHOUT gabb_structure (n=9) | Diff |
|--------|---------------------------|------------------------------|------|
| Time | 34.9s ± 21.0 | 40.1s ± 20.5 | -5.2s |
| Tokens | 86,114 ± 18,133 | 55,894 ± 16,917 | +30,220 |
| Avg Reads | 2.2 | 2.4 | -0.2 |
| Success | 100% | 100% | - |

```
t-statistic for time difference: -0.64
Degrees of freedom: ~14.8

Result: NOT statistically significant (p > 0.5)
```

### Interpretation

The naive comparison (WITH vs WITHOUT gabb_structure across all Gabb runs) showed gabb_structure runs as SLOWER and using MORE tokens. This was **selection bias**:

1. Runs that don't need to read files (fastest, cheapest) never call gabb_structure
2. Runs that use gabb_structure are doing more work by definition
3. Among runs that DO read files, gabb_structure shows a non-significant 5s advantage

**Conclusion:** The time savings in Gabb condition come from **behavioral change** (the skill teaching the model it can often solve without exploration), not specifically from gabb_structure efficiency.

---

## 6. Token Cost Deep Dive

### Where Tokens Go

Analyzing individual transcripts:

| Component | Tokens | Notes |
|-----------|--------|-------|
| Base system prompt (cached) | ~22,000 | Same for all runs |
| SKILL.md | ~670 | Added for Gabb runs |
| gabb_structure output | ~100-150 | Very compact |
| Read file content | ~2,500-5,000 | Per file read |
| Conversation accumulation | ~200-500/turn | Compounds over turns |

### Token Breakdown by Condition

| Condition | Cache Read | Total |
|-----------|------------|-------|
| Control | 57,919 ± 10,099 | 60,435 ± 10,409 |
| Gabb WITHOUT structure | 63,187 ± 12,365 | 64,486 ± 12,356 |
| Gabb WITH structure | 84,667 ± 18,183 | 86,114 ± 18,133 |

**Analysis:**
- Gabb overhead (SKILL.md + MCP tools): ~4k tokens (Control vs Gabb-without-structure)
- gabb_structure + Read overhead: ~21k tokens (mostly from file content)

### Actual gabb_structure Response Size

From transcript analysis:
```
Tool result at index 7: 579 chars (~100 tokens)
Content: /path/to/file.py:750
Summary: 15 methods, 2 variables, 1 class | 750 lines
__all__ va 15
_arit_doc va 20
NDArithmeticMixin cl 103
...
```

**The gabb_structure output itself is already minimal.** The token increase comes from the Read operations that follow.

---

## 7. SKILL.md Redundancy Analysis

### Current Structure (2,706 chars, ~670 tokens)

| Section | Chars | Tokens | Redundant? |
|---------|-------|--------|------------|
| Header/frontmatter | 294 | ~73 | No |
| Pre-Flight Checklist | 547 | ~136 | Unique |
| Purpose | 221 | ~55 | Yes - in MCP desc |
| When to Use | 525 | ~131 | Yes - in MCP desc |
| Supported Languages | 414 | ~103 | Unique |
| Usage Pattern | 225 | ~56 | Yes - in MCP desc |
| Output Example | 422 | ~105 | Useful |

### Duplicated Content (with MCP tool description)

Both SKILL.md and the MCP tool description contain:
1. "MANDATORY PRE-READ CHECK" directive
2. "5,000-10,000 tokens" cost warning
3. "~50 tokens" for gabb_structure
4. Exceptions list (files <50 lines, already seen, etc.)
5. "offset/limit" instruction

### Proposed Minimal SKILL.md (~180 tokens)

```markdown
---
name: gabb-code-navigation
description: |
  Teaches when to use gabb_structure for efficient file exploration.
allowed-tools: mcp__gabb__gabb_structure, Edit, Write, Bash, Read, Glob
---

# gabb File Structure Preview

## Quick Reference

**Before Read on code files** → call `gabb_structure` first

Supported: `.py` `.pyi` `.ts` `.tsx` `.rs` `.kt` `.kts` `.cpp` `.cc` `.hpp` `.hh`

Skip for: files <50 lines, already seen, non-code files, unsupported languages

## What You Get

```
/path/file.rs:450
Summary: 15 functions, 3 structs | 450 lines

MyStruct st 10
 new fn 12
helper fn 30
```

Symbol names, kinds, line numbers—then Read with offset/limit.
```

**Potential savings:** ~490 tokens per run

---

## 8. Detailed Run Data

### Gabb Runs WITH gabb_structure (sorted by time)

| # | Time | Tokens | Reads | Structure | Success |
|---|------|--------|-------|-----------|---------|
| 1 | 20.0s | 91,443 | 1 | 1 | ✓ |
| 2 | 20.4s | 91,384 | 1 | 1 | ✓ |
| 3 | 21.5s | 91,431 | 1 | 1 | ✓ |
| 4 | 21.8s | 91,457 | 1 | 1 | ✓ |
| 5 | 21.9s | 91,412 | 1 | 1 | ✓ |
| 6 | 21.9s | 91,403 | 1 | 1 | ✓ |
| 7 | 21.9s | 91,481 | 1 | 1 | ✓ |
| 8 | 22.0s | 91,462 | 1 | 1 | ✓ |
| 9 | 22.6s | 91,424 | 1 | 1 | ✓ |
| 10 | 23.1s | 91,431 | 1 | 1 | ✓ |
| 11 | 23.1s | 91,400 | 1 | 1 | ✓ |
| 12 | 23.4s | 91,470 | 1 | 1 | ✓ |
| 13 | 23.9s | 91,386 | 1 | 1 | ✓ |
| 14 | 24.3s | 91,469 | 1 | 1 | ✓ |
| 15 | 24.3s | 91,407 | 1 | 1 | ✓ |
| 16 | 24.6s | 91,459 | 1 | 1 | ✓ |
| 17 | 27.7s | 115,021 | 1 | 1 | ✓ |
| 18 | 41.6s | 115,403 | 1 | 1 | ✓ |
| 19 | 51.1s | 69,740 | 3 | 1 | ✓ |
| 20 | 52.7s | 45,816 | 5 | 1 | ✓ |
| 21 | 64.2s | 46,203 | 3 | 1 | ✓ |
| 22 | 74.4s | 70,706 | 7 | 2 | ✓ |
| 23 | 79.2s | 94,994 | 10 | 2 | ✓ |
| 24 | 85.9s | 45,922 | 8 | 2 | ✓ |

### Gabb Runs WITHOUT gabb_structure (sorted by time)

| # | Time | Tokens | Reads | Success |
|---|------|--------|-------|---------|
| 1 | 14.6s | 67,651 | 0 | ✓ |
| 2 | 15.1s | 67,710 | 0 | ✓ |
| 3 | 15.1s | 67,666 | 0 | ✓ |
| 4 | 15.4s | 67,648 | 0 | ✓ |
| 5 | 15.6s | 67,635 | 0 | ✓ |
| 6 | 16.2s | 67,633 | 0 | ✓ |
| 7 | 16.3s | 67,735 | 0 | ✓ |
| 8 | 16.8s | 67,628 | 0 | ✓ |
| 9 | 16.9s | 67,638 | 0 | ✓ |
| 10 | 16.9s | 67,694 | 0 | ✓ |
| 11 | 17.6s | 67,622 | 0 | ✓ |
| 12 | 18.0s | 67,701 | 0 | ✓ |
| 13 | 18.3s | 67,688 | 0 | ✓ |
| 14 | 18.6s | 67,621 | 0 | ✓ |
| 15 | 19.1s | 67,710 | 0 | ✓ |
| 16 | 19.7s | 68,238 | 1 | ✓ |
| 17 | 22.0s | 67,637 | 0 | ✓ |
| 18 | 22.4s | 90,973 | 0 | ✓ |
| 19 | 26.8s | 91,354 | 1 | ✓ |
| 20 | 30.7s | 45,469 | 1 | ✓ |
| 21 | 32.5s | 45,462 | 1 | ✓ |
| 22 | 33.7s | 45,420 | 4 | ✓ |
| 23 | 34.4s | 45,293 | 3 | ✓ |
| 24 | 36.7s | 45,439 | 1 | ✓ |
| 25 | 59.4s | 45,530 | 2 | ✓ |
| 26 | 86.6s | 70,837 | 8 | ✓ |

---

## 9. Recommendations

### Immediate Actions

1. **Trim SKILL.md** - Remove redundant sections that duplicate MCP tool description. Saves ~490 tokens/run.

2. **No changes to gabb_structure output** - Already optimized at ~100 tokens.

### Future Considerations

1. **Run 100+ tests** to get statistical power for subgroup analysis (does gabb_structure specifically help among file-reading runs?)

2. **Consider A/B testing** SKILL.md variations:
   - Full SKILL.md (current)
   - Minimal SKILL.md (proposed)
   - No SKILL.md (MCP tool description only)

3. **Investigate the 0-read success pattern** - Why can 34% of Gabb runs solve without reading files? Is this due to:
   - Task characteristics (simpler tasks)?
   - Skill guidance improving reasoning?
   - Random variation?

---

## 10. Appendix: Raw Data Location

- Results JSON: `benchmark/claude-code/results/results_astropy__astropy-14995_n50_20260101_232204.json`
- Transcripts: `~/.claude/projects/-Users-dmb--cache-gabb-benchmark-repos-workspaces-astropy--astropy--b16c7d12ccbc/*.jsonl`
- Analysis date: 2026-01-02
